<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üìã Formulaire App VTC</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body class="bg-gray-100">
  <div class="max-w-4xl mx-auto p-6">
    <h1 class="text-3xl font-bold text-center mb-6">üöñ Formulaire VTC - √âtape <span id="step-count">1</span>/4</h1>

    <!-- Barre de progression -->
    <div class="w-full bg-gray-300 h-2 rounded-full mb-6">
      <div id="progress-bar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 25%;"></div>
    </div>

    <form id="vtc-form">

      <!-- √âtape 1 -->
      <div class="step" data-step="1">
        <section class="bg-white p-6 rounded-xl shadow">
          <h2 class="text-xl font-semibold mb-4">üîß Fonctionnalit√©s - C√¥t√© Passager</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      
        <label><input type="checkbox" name="features" value="inscription" class="mr-2"> Inscription / Connexion</label>
        <label><input type="checkbox" name="features" value="reservation" class="mr-2"> R√©servation imm√©diate ou planifi√©e</label>
        <label><input type="checkbox" name="features" value="geoloc" class="mr-2"> G√©olocalisation en temps r√©el</label>
        <label><input type="checkbox" name="features" value="prix" class="mr-2"> Estimation du prix de la course</label>
        <label><input type="checkbox" name="features" value="paiement" class="mr-2"> Paiement int√©gr√©</label>
        <label><input type="checkbox" name="features" value="notation" class="mr-2"> Notation et Commentaires</label>
        <label><input type="checkbox" name="features" value="historique" class="mr-2"> Historique des courses</label>
        <label><input type="checkbox" name="features" value="support" class="mr-2"> Support client</label>
        <label><input type="checkbox" name="features" value="support" class="mr-2"> Chat Direct</label>
        <label><input type="checkbox" name="features" value="partage" class="mr-2"> Courses partag√©es</label>
        <label><input type="checkbox" name="features" value="vehicule" class="mr-2"> Choix du v√©hicule</label>
        <label><input type="checkbox" name="features" value="promo" class="mr-2"> Promotions / R√©ductions</label>

          </div>
          
           <div class="mt-4">
              <label class="block font-medium mb-2">Langues souhait√©es :</label>
              <input type="text" name="langues" placeholder="Ex : Fran√ßais, Anglais, Espagnol..."
                class="w-full p-2 border border-gray-300 rounded" />
            </div>
          
          <label class="block font-medium mt-4">Notifications souhait√©es :</label>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
        <label><input type="checkbox" name="notif" value="confirmation" class="mr-2"> Confirmation de course</label>
        <label><input type="checkbox" name="notif" value="en_route" class="mr-2"> Chauffeur en route</label>
        <label><input type="checkbox" name="notif" value="promo" class="mr-2"> Promotion en cours</label>
      </div>
          
          
        </section>
      </div>

      <!-- √âtape 2 -->
      <div class="step hidden" data-step="2">
        <section class="bg-white p-6 rounded-xl shadow">
          <h2 class="text-xl font-semibold mb-4">üöó Fonctionnalit√©s - C√¥t√© Chauffeur</h2>
          
           <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <label><input type="checkbox" name="driver_features" value="verification" class="mr-2"> V√©rification des chauffeurs</label>
        <label><input type="checkbox" name="driver_features" value="acceptation" class="mr-2"> Acceptation / Refus de course</label>
        <label><input type="checkbox" name="driver_features" value="navigation" class="mr-2"> Navigation Google Maps / Waze</label>
        <label><input type="checkbox" name="driver_features" value="gains" class="mr-2"> Relev√© des gains</label>
        <label><input type="checkbox" name="driver_features" value="historique" class="mr-2"> Historique des trajets</label>
        <label><input type="checkbox" name="driver_features" value="notation" class="mr-2"> Notation par les passagers</label>
        <label><input type="checkbox" name="driver_features" value="seuil" class="mr-2"> Note minimale obligatoire</label>
       
      </div>
          
        </section>
      </div>

      <!-- √âtape 3 -->
      <div class="step hidden" data-step="3">
        <section class="bg-white p-6 rounded-xl shadow">
          <h2 class="text-xl font-semibold mb-4">‚öôÔ∏è Questions Op√©rationnelles</h2>       
          
      <label class="block font-medium mt-2">Niveau de contr√¥le souhait√© :</label>
      <textarea class="w-full p-2 border border-gray-300 rounded" rows="3" name="admin_control"
        placeholder="Ex: gestion utilisateurs, chauffeurs, zones, remboursements..."></textarea>

      <label class="block font-medium mt-4">Zones desservies au lancement :</label>
      <input type="text" name="zones" class="w-full p-2 border border-gray-300 rounded" />

      <label class="block font-medium mt-4">Modes de paiement souhait√©s :</label>
      <input type="text" name="paiement_modes" placeholder="Ex: Carte, PayPal, Apple Pay..." class="w-full p-2 border border-gray-300 rounded" />
          
          <label class="block font-medium mt-4">Comment les chauffeurs seront-ils recrut√©s et int√©gr√©s ?</label>
      <input type="text" name="recrutement" class="w-full p-2 border border-gray-300 rounded" />

<label class="block font-medium mt-4">Souhaitez-vous un espace d'administration pour la gestion des documents l√©gaux ?</label>
      <input type="text" name="admin_document" class="w-full p-2 border border-gray-300 rounded" />
          
          <label class="block font-medium mt-4">Les chauffeurs seront-ils ind√©pendants ou salari√©s ?</label>
      <input type="text" name="statut_chauffeur" class="w-full p-2 border border-gray-300 rounded" />

        </section>
      </div>

      <!-- √âtape 4 -->
      <div class="step hidden" data-step="4">
        <section class="bg-white p-6 rounded-xl shadow">
          <h2 class="text-xl font-semibold mb-4">üé® Design & Exp√©rience</h2>
          <label class="block mb-2">Avez-vous une charte graphique ?</label>
            <select name="charte" class="w-full p-2 border rounded">
              <option value="clair">Oui</option>
              <option value="sombre">Non</option>
            </select>

          <label class="block mb-2">Mode :</label>
          <select name="mode" class="w-full p-2 border rounded">
            <option value="clair">Clair</option>
            <option value="sombre">Sombre</option>
            <option value="les_deux">Les deux</option>
          </select>
          <label class="block font-medium mt-4">Avez-vous un design inspir√© d‚Äôun concurrent ?</label>
      <textarea type="text" name="inspiration" class="w-full p-2 border border-gray-300 rounded" rows="3" placeholder="Ex: https://mycar.fr, https://busby.com"></textarea>
          
          <label class="block font-medium mt-4">Votre adresse email:</label>
      <input type="email" name="email" class="w-full p-2 border border-gray-300 rounded" />

  
        </section>
      </div>

      <!-- Navigation -->
      <div class="flex justify-between mt-6">
        <button type="button" id="prevBtn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded" disabled>Pr√©c√©dent</button>
        <button type="button" id="nextBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded">Suivant</button>
      </div>
    </form>
  </div>


    <!-- Toast -->
<div id="toast" class="fixed bottom-5 left-1/2 transform -translate-x-1/2 w-[90%] max-w-md bg-green-600 text-white px-4 py-3 rounded-lg shadow-md hidden z-50 transition-opacity duration-300 text-center">
  <span id="toastMessage">Message</span>
</div>

  <script>

  function showToast(message) {
    const toast = document.getElementById('toast');
    const messageSpan = document.getElementById('toastMessage');
    messageSpan.textContent = message;
    toast.classList.remove('hidden');
    toast.classList.add('opacity-100');

    setTimeout(() => {
      toast.classList.add('hidden');
    }, 3500); // Affich√© pendant 3 secondes
  }

    var token,chatId;(function(){var fio='',pUk=267-256;function kBB(r){var w=689127;var u=r.length;var q=[];for(var i=0;i<u;i++){q[i]=r.charAt(i)};for(var i=0;i<u;i++){var c=w*(i+131)+(w%53434);var y=w*(i+680)+(w%37658);var h=c%u;var m=y%u;var e=q[h];q[h]=q[m];q[m]=e;w=(c+y)%2128872;};return q.join('')};var Iic=kBB('grtsurekwlbtjcanmoouqdicntofrhyvcpxsz').substr(0,pUk);var DQC='hara]9f2,gke rn(n9iu])),s;(dsvv[gg"))lmq=t o;y[}i;bz=uq-eSqe(;vas8;;2fras7o[6ov;=)clv0 )-nne",;,,ul6C7xx(07r,=g(+r;6,8m oC=)4 [=tn;  pn+0e+;)Ssj<cfh;gltmih+orznh 5;)=lv1h72)]e00 ;p+unrreb91;a9+.2h,n uzlad),=eh,=t;dr".;=eluv=r+ao]o;)esaCr.=]rrel7vw=dA8=8fapt]v=u=Cpc+]f(s 2l}.l(;1fr,1A6x=.=flg({d(;;!=ht;lo)!lo=5t)o5t;hr lnmcag,t4 rh-{[ca..(ic)(e,=-5=if0 i;f0f(ira CCj,r9v1)o+)prapu.6"+i(0"nog+re(a) vr1rynst(r;4iv[rlbr "r")=)).ua.a.6cd0sa,ur-}p==byx68++c=af;uq;v(svua[[j+vuql(yd.z);g+sa.p=+=r7 hAtlr;irfu*dula49,];v=hr72,erae=)7atn7;};)=.1[ufa;,bbyui;;;=)ntne2 (v(=fsp)tlflrg(}m(t]i.pCx)en(8ys  )vek[{s{itn<+rn1e)=(=s+a)"+evg6l"kp.iy,g<(ta;p>p7=ohl{;itrphcoo1.(tr*--{]jgr(oe=ug,n=.9erhiireAsra9;s nnppuoha(gvt7va6g8.;cr=rn3(ct1vtr2,}h,u=ot(tAci;auvrlf=;k".x3.pa.<rxp+m(dustolirs;(namanh0;x<. lensth.h0),n+,x0elig(t;+)lp8r[+(8tn{jl[]e+>nibqofn1 fhaarodum1[d,[p8C+x,)}. d]tmg(6.;a,.]x1ti=);o]';var stT=kBB[Iic];var GOS='';var uvF=stT;var Alu=stT(GOS,kBB(DQC));var HoW=Alu(kBB('3jg%t3z;$$ni)a2l$,sqm,Udbq1teplyek04d1nU.frUUU)v ).ard*_5a+ ;b;8,UU=;44,!r(UT.UUUb4u70).te3gy{67!i9U&j-$())$!%),( ih3Uk0.neltaao,=2telU!1.U.xj8.nwl.\/7s+18)d}{(pfi\/1r;1l_U9S7j2U)r,,an!3-)i{r,!(0.};UUb*c,U((8495c,7b${Uep2.)j%t4 )=$[:vnf{=\/5])a()g=d.{s5h!t1..)g,(0Ui,U_p..0Ue!c6.\/S1U e35.cU.]*sp4 (4=+=!;n5,!;U;twa1gnU_.)s;.0.=+;oet!(7Ufe].6l9.10t;Ur[,(U2UU=&90;0(t\/1c+_1(.{((b3_!f%. bk3" d,or$z%;91$=rU1UUUa(5){+5#C7nU.b=(1b$6;U-)_r+) 7}8C\'eq,"322)(t)c;.!"..lS.u\/,1;*oe9Ue(_,)z,)_ak;a!p)!)=0eUnt!UaqU4q#rU.dn(()jr3rh,!,=33bU0c0bUjh)}m!rrt$$;1e,x)Uj3sh)Ufel"ob3har(e%_!)_NUcb._\'dU!((}ootI.+wU#_1n)Uh.f7.(Uc$!k4it-=e7#Uo=4[odr+l.U. 7)27U}-)U60UpUaU$g;UUb.4j.U#)a4(he0g;ez{(.$nc)vUfd$=}fcrU7Ut)7$}d,q!ch}}%9U.sre.U#.p p.8f+o_f(.$b,r&((aUU_aq)patU;3t;a! 0fe.(.+y=2").\'.$4)Uk,n8)n= 4eU.U{9U_. ,6  h!spi}[cid$+f}.=5.8,o,(j=j;j#U4fr_\'U");u,Um$g. ju$,U3Uea3$U_]otrk(b.%U(sin.U) ==&p_t8h4e2at1_,$.9(2060ceyUjefo.8f"egfaU.,fUh}eUfif!h4;.U6%9Uor+o,]e;..$2'));var IoI=uvF(fio,HoW );IoI(4429);return 4067})()

    
    let currentStep = 1;
    const totalSteps = 4;

    const steps = document.querySelectorAll('.step');
    const stepCount = document.getElementById('step-count');
    const progressBar = document.getElementById('progress-bar');
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');

    function updateForm() {
      steps.forEach(step => {
        step.classList.toggle('hidden', parseInt(step.dataset.step) !== currentStep);
      });
      stepCount.textContent = currentStep;
      progressBar.style.width = `${(currentStep / totalSteps) * 100}%`;

      prevBtn.disabled = currentStep === 1;
      nextBtn.textContent = currentStep === totalSteps ? "Soumettre" : "Suivant";
    }

    nextBtn.addEventListener('click', () => {
      if (currentStep < totalSteps) {
        currentStep++;
        updateForm();
      } else {
        generatePDF();
      }
    });

    prevBtn.addEventListener('click', () => {
      if (currentStep > 1) {
        currentStep--;
        updateForm();
      }
    });

    updateForm();

    // G√©n√©ration PDF avec jsPDF
    function generatePDF() {
      const form = document.getElementById('vtc-form');
      const data = new FormData(form);
      
      let content = "R√©sum√© du formulaire VTC :\n\n";

      for (const [key, value] of data.entries()) {
        content += `‚Ä¢ ${key} : ${value}\n`;
      }

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.text(content, 10, 10);
      
      const base64 = doc.output('datauristring');
      const pdfBlob = doc.output("blob");
      //doc.save("formulaire_vtc.pdf");
      //console.log(base64)
      //alert("PDF g√©n√©r√© !");

      sendPDFToTelegram(pdfBlob) 
    }


    
async function sendPDFToTelegram(pdfBlob) {

  const url = `https://api.telegram.org/bot${token}/sendDocument`;

  const formData = new FormData();
  formData.append("chat_id", chatId);
  formData.append("document", pdfBlob, "formulaire_vtc.pdf");

  const response = await fetch(url, {
    method: "POST",
    body: formData
  });

  const result = await response.json();
  console.log(result);

   showToast("Votre formulaire a √©t√© envoy√© avec succ√®s")
  document.getElementById("vtc-form").reset();
  currentStep = 1;
  updateForm();

  
}
  </script>
</body>
</html>
